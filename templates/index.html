<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard</title>
</head>
<body>
    <canvas id="drawingCanvas" width="500" height="500" style="border:1px solid black;"></canvas>
    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        let lastX = null;
        let lastY = null;

        const source = new EventSource('/coordinates');
        source.onmessage = function(event) {
            const [x, y] = event.data.split(',').map(Number);

            if (lastX !== null && lastY !== null) {
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
            }

            lastX = x;
            lastY = y;
        };

        // Reset drawing on canvas click
        canvas.addEventListener('click', () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            lastX = null;
            lastY = null;
        });
    </script>
</body>
</html>
